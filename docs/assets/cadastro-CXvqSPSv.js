import{A as S}from"./config-C8MW31Vj.js";import{s as m}from"./mode-DIhV9zwq.js";document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".logo-icon");t&&t.addEventListener("click",()=>{t.classList.add("rolling"),t.addEventListener("animationend",()=>{t.classList.remove("rolling")},{once:!0})})});const v={beleza:{name:"üëí Beleza",classes:{"Estilista das Sombras":{},"Feiticeira das Unhas":{},"Encantador de Cores":{},"Artista das Luzes":{},"Cortes Fantasma":{},"Guardi√£ das Flores":{},"Alquimista do Perfume":{},"Mestre do Reflexo":{}}},gastronomia:{name:"üë®‚Äçüç≥ Gastronomia",classes:{"Cozinheiro Arcano":{},"Alquimista dos Sabores":{},"Guardi√£ do Forno":{},"Mestre das Caldeiradas":{},"Confeiteiro M√≠stico":{},"Senhor dos Temperos":{},"Sommelier Sagrado":{},"Druida da Nutri√ß√£o":{}}},gestao:{name:"üë©‚Äçüéì Gest√£o",classes:{"Senhor dos N√∫meros":{},"Administrador da Ordem":{},"Analista Vision√°rio":{},"Estrategista de Elite":{},"Protetor do Equil√≠brio":{},"Mediador das Alian√ßas":{},"Juiz da Justi√ßa":{},"Cronista do Progresso":{}}},oftalmo:{name:"üëÅÔ∏è Oftalmologia",classes:{"Vidente da Vis√£o":{},"Guardi√£ do Olhar":{},"Ca√ßador de Detalhes":{},"Mestre da Clareza":{},"Sentinela Invis√≠vel":{},"Or√°culo das Lentes":{},"Defensor da Retina":{},"Ilusionista da Percep√ß√£o":{}}},tecnologia:{name:"üñ•Ô∏è Tecnologia",classes:{"Arqueiro do JavaScript":{},"Cafeicultor do Java":{},"Mago do CSS":{},"Paladino do HTML":{},"B√°rbaro do Back-end":{},"Domador de Dados":{},"Elfo do Front-end":{},"Ca√ßador de Bugs":{}}},idiomas:{name:"üåê Idiomas",classes:{"Orador das Runas":{},"Tradutor das Sombras":{},"Bardo Poliglota":{},"S√°bio dos Dialetos":{},"Emiss√°rio Universal":{},"Guardi√£o da Palavra":{},"Feiticeiro da Pron√∫ncia":{},"Lexic√≥grafo Arcano":{}}}};function T(){const t=document.getElementById("curso-select"),e=document.getElementById("class-select");if(!t||!e){console.error("Elementos curso-select ou class-select n√£o encontrados");return}t.addEventListener("change",function(){const s=t.value;if(e.innerHTML="",!s||!v[s]){e.innerHTML='<option value="">Escolha o curso primeiro</option>',e.disabled=!0;return}e.disabled=!1,e.innerHTML='<option value="">Escolha sua classe RPG</option>',Object.keys(v[s].classes).forEach(n=>{e.innerHTML+=`<option value="${n}">${n}</option>`}),d()})}document.getElementById("curso-select")&&document.getElementById("class-select")&&T();function A(){F(),M(),P()}function F(){document.querySelectorAll(".btn-primary, .btn-secondary").forEach(e=>{e.addEventListener("mouseenter",function(){this.style.transform="translateY(-2px) scale(1.02)",this.style.transition="all 0.3s ease"}),e.addEventListener("mouseleave",function(){this.style.transform="translateY(0) scale(1)"}),e.addEventListener("mousedown",function(){this.style.transform="translateY(0) scale(0.98)"}),e.addEventListener("mouseup",function(){this.style.transform="translateY(-2px) scale(1.02)"})})}function M(){const t=document.getElementById("register-form");function e(n){n&&(n.style.opacity="0",n.style.transform="translateY(20px)",setTimeout(()=>{n.style.transition="all 0.5s ease",n.style.opacity="1",n.style.transform="translateY(0)"},50))}const s=new MutationObserver(function(n){n.forEach(function(a){if(a.type==="attributes"&&a.attributeName==="class"){const r=a.target;r.id==="register-form"&&!r.classList.contains("hidden")&&(e(r),L())}})});t&&s.observe(t,{attributes:!0})}function L(){["reg-username","reg-fullname","reg-email","reg-password","curso-select","class-select"].forEach(s=>{const n=document.getElementById(s);n&&(n.value="",n.classList.remove("has-content"))}),["username-feedback","fullname-feedback","email-feedback","password-feedback","password-strength"].forEach(s=>{const n=document.getElementById(s);n&&n.classList.add("hidden")}),d()}function P(){let t=0;const e=document.querySelector(".logo, h1");e&&e.addEventListener("click",function(){t++,t===5&&(document.body.style.filter="hue-rotate(180deg)",setTimeout(()=>{document.body.style.filter="none"},2e3),t=0)}),document.addEventListener("click",function(s){O(s.clientX,s.clientY)})}function O(t,e){const s=document.createElement("div");s.style.position="fixed",s.style.left=t+"px",s.style.top=e+"px",s.style.width="6px",s.style.height="6px",s.style.background="#667eea",s.style.borderRadius="50%",s.style.pointerEvents="none",s.style.zIndex="9999",s.style.transition="all 0.5s ease-out",document.body.appendChild(s),setTimeout(()=>{s.style.transform="translateY(-20px) scale(0)",s.style.opacity="0"},10),setTimeout(()=>{document.body.removeChild(s)},500)}const g=document.createElement("style");g.textContent=`
  .has-content {
    background: rgba(255, 255, 255, 0.95) !important;
  }
`;document.head.appendChild(g);const f=document.createElement("style");f.textContent=`
  .password-bar.active {
    background: #22c55e !important;
  }
`;document.head.appendChild(f);console.log("Estilos din√¢micos aplicados:",g.textContent,f.textContent);function I(t){return t.length>=5}function B(t){const s=/^[A-Za-z\s]+$/.test(t);return t.length>=3&&s}function x(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function k(t){return{length:t.length>=8,uppercase:/[A-Z]/.test(t),lowercase:/[a-z]/.test(t),number:/[0-9]/.test(t),symbol:/[!@#$%^&*(),.?":{}|<>_\-+=~`[\]\\\/]/.test(t)}}function p(){const t=document.getElementById("reg-username"),e=document.getElementById("username-feedback");if(!t||!e){console.error("Elementos reg-username ou username-feedback n√£o encontrados");return}const s=t.value.trim();if(s.length===0){e.textContent="",e.classList.add("hidden"),e.classList.remove("text-red-500");return}I(s)?(e.textContent="",e.classList.add("hidden"),e.classList.remove("text-red-500")):(e.textContent="Faltam: pelo menos 5 caracteres",e.classList.remove("hidden"),e.classList.add("text-red-500"))}function E(){const t=document.getElementById("reg-fullname"),e=document.getElementById("fullname-feedback");if(!t||!e){console.error("Elementos reg-fullname ou fullname-feedback n√£o encontrados");return}const s=t.value.trim();if(s.length===0){e.textContent="",e.classList.add("hidden"),e.classList.remove("text-red-500");return}B(s)?(e.textContent="",e.classList.add("hidden"),e.classList.remove("text-red-500")):(e.textContent="Nome completo deve ter pelo menos 3 caracteres e conter apenas letras e espa√ßos.",e.classList.remove("hidden"),e.classList.add("text-red-500"))}function y(){const t=document.getElementById("reg-email"),e=document.getElementById("email-feedback");if(!t||!e){console.error("Elementos reg-email ou email-feedback n√£o encontrados");return}const s=t.value.trim();if(s.length===0){e.textContent="",e.classList.add("hidden"),e.classList.remove("text-red-500");return}x(s)?(e.textContent="",e.classList.add("hidden"),e.classList.remove("text-red-500")):(e.textContent="Email inv√°lido. Use o formato: exemplo@dominio.com",e.classList.remove("hidden"),e.classList.add("text-red-500"))}function b(){const t=document.getElementById("reg-password"),e=document.getElementById("password-feedback"),s=document.getElementById("password-strength"),n=document.getElementById("password-strength-text");if(!t||!e||!s||!n){console.error("Elementos de senha n√£o encontrados");return}const a=s.querySelectorAll(".password-bar"),r=t.value,o=k(r);let l=Object.values(o).filter(Boolean).length,c=l===5;if(r.length===0){e.textContent="",e.classList.add("hidden"),e.classList.remove("text-red-500"),s.classList.add("hidden"),a.forEach(i=>{i.classList.remove("active"),i.style.background="#e5e7eb"});return}s.classList.remove("hidden"),s.classList.add("mb-3"),e.innerHTML="",c?(e.textContent="",e.classList.add("hidden"),e.classList.remove("text-red-500"),e.classList.remove("dark:text-red-300")):(e.innerHTML='<span class="text-yellow-600"><i class="fas fa-exclamation-triangle"></i> Senha deve atender todos os crit√©rios:</span>',e.classList.remove("hidden"),e.classList.add("text-red-500"),e.classList.add("dark:text-red-300"));let u=[{label:"Pelo menos 8 caracteres",valid:o.length},{label:"Uma letra mai√∫scula (A-Z)",valid:o.uppercase},{label:"Uma letra min√∫scula (a-z)",valid:o.lowercase},{label:"Um n√∫mero (0-9)",valid:o.number},{label:"Um s√≠mbolo (!@#$%^&* etc.)",valid:o.symbol}],h="";u.forEach(i=>{h+=`<div class="flex items-center gap-2 mb-1">
      <span class="${i.valid?"text-green-600":"text-red-500"}">
        <i class="fas fa-${i.valid?"check":"times"}"></i>
      </span>
      ${i.label}
    </div>`}),n.innerHTML=h,a.forEach((i,w)=>{w<l?i.classList.add("active"):(i.classList.remove("active"),i.style.background="#e5e7eb")})}function C(){const t=document.getElementById("reg-username")?.value.trim(),e=document.getElementById("reg-fullname")?.value.trim(),s=document.getElementById("reg-email")?.value.trim(),n=document.getElementById("reg-password")?.value,a=document.getElementById("curso-select")?.value,r=document.getElementById("class-select")?.value;if(!t||!e||!s||!n||!a||!r)return console.log("Campos obrigat√≥rios n√£o preenchidos:",{username:t,fullname:e,email:s,password:n,curso:a,classe:r}),!1;const o=I(t),l=B(e),c=x(s),u=Object.values(k(n)).every(Boolean);return console.log("Valida√ß√µes:",{usernameValid:o,fullnameValid:l,emailValid:c,passwordValid:u}),o&&l&&c&&u}function d(){const t=document.getElementById("registerSubmitButton");if(!t){console.error("Bot√£o registerSubmitButton n√£o encontrado");return}const e=C();t.disabled=!e,t.classList.toggle("opacity-50",!e),t.classList.toggle("cursor-not-allowed",!e)}function R(t){return{beleza:"beleza",gastronomia:"gastro",gestao:"gestao",oftalmo:"oftalmo",tecnologia:"tecno",idiomas:"idioma"}[t]||null}async function z(){if(!C()){m("Preencha todos os campos corretamente!","error");return}const t=document.getElementById("reg-username").value.trim(),e=document.getElementById("reg-fullname").value.trim(),s=document.getElementById("reg-email").value.trim(),n=document.getElementById("reg-password").value,a=document.getElementById("curso-select").value,r=document.getElementById("class-select").value,o=R(a);console.log("[REGISTER FRONT] Dados enviados:",{username:t,fullname:e,email:s,password:n,curso:a,classe:r,masterArea:o});try{const l=await fetch(`${S}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,fullname:e,email:s,password:n,curso:a,class:r,pending:!0,masterArea:o,isMaster:!1})});let c;try{c=await l.json()}catch{c={}}if(!l.ok){m(c.message||c.error||`Erro ${l.status}: ${l.statusText}`,"error");return}c.success?(m("Conta criada! Aguarde aprova√ß√£o do mestre da √°rea.","success"),L(),d()):m(c.message||"Erro ao criar213 conta.","error")}catch{m("Erro de conex√£o com o servidor.","error")}}document.addEventListener("DOMContentLoaded",()=>{console.log("DOMContentLoaded: Inicializando valida√ß√µes"),A(),p(),E(),y(),b(),d();const t=document.getElementById("reg-username"),e=document.getElementById("reg-fullname"),s=document.getElementById("reg-email"),n=document.getElementById("reg-password");document.getElementById("curso-select");const a=document.getElementById("class-select"),r=document.getElementById("registerSubmitButton");t?t.addEventListener("input",()=>{console.log("Input no username"),p(),d()}):console.error("Elemento reg-username n√£o encontrado"),e?e.addEventListener("input",()=>{console.log("Input no fullname"),E(),d()}):console.error("Elemento reg-fullname n√£o encontrado"),s?s.addEventListener("input",()=>{console.log("Input no email"),y(),d()}):console.error("Elemento reg-email n√£o encontrado"),n?n.addEventListener("input",()=>{console.log("Input no password"),b(),d()}):console.error("Elemento reg-password n√£o encontrado"),["curso-select","class-select"].forEach(o=>{const l=document.getElementById(o);l?l.addEventListener("change",()=>{console.log(`Change no ${o}`),d()}):console.error(`Elemento ${o} n√£o encontrado`)}),a&&a.addEventListener("click",function(){this.disabled&&m("Por favor, escolha um curso primeiro!","warning")}),r?r.addEventListener("click",function(o){o.preventDefault(),console.log("Bot√£o de cadastro clicado"),z()}):console.error("Bot√£o registerSubmitButton n√£o encontrado")});function D(){const t=document.documentElement,e=document.getElementById("theme-icon");t.getAttribute("data-theme")==="dark"?(t.removeAttribute("data-theme"),t.classList.remove("dark"),localStorage.setItem("theme","light"),e&&(e.className="fas fa-moon theme-icon-moon")):(t.setAttribute("data-theme","dark"),t.classList.add("dark"),localStorage.setItem("theme","dark"),e&&(e.className="fas fa-sun theme-icon-sun"))}function $(){const t=localStorage.getItem("theme")||"light",e=document.documentElement,s=document.getElementById("theme-icon");t==="dark"?(e.setAttribute("data-theme","dark"),e.classList.add("dark"),s&&(s.className="fas fa-sun theme-icon-sun")):(e.removeAttribute("data-theme"),e.classList.remove("dark"),s&&(s.className="fas fa-moon theme-icon-moon"))}window.toggleTheme=D;$();export{v as a};
