import{A as c}from"./config-C8MW31Vj.js";/* empty css              */import{a as l,t as m,s as r}from"./mode-DIhV9zwq.js";l();window.toggleTheme=m;const f=new URLSearchParams(window.location.search),t=f.get("token");t||(r("Link inválido ou expirado!","error"),setTimeout(()=>{window.location.href="index.html"},2e3));const s=document.getElementById("resetPasswordBtn"),i=document.getElementById("newPassword"),d=document.getElementById("confirmPassword");s.addEventListener("click",async()=>{const e=i.value,n=d.value;if(!e||!n){r("Preencha todos os campos!","error");return}if(e.length<6){r("A senha deve ter no mínimo 6 caracteres!","error");return}if(e!==n){r("As senhas não coincidem!","error");return}s.disabled=!0,s.innerHTML='<i class="fas fa-spinner fa-spin mr-2"></i>Redefinindo...';try{const o=await fetch(`${c}/auth/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,newPassword:e})}),a=await o.json();o.ok?(r("Senha redefinida com sucesso!","success"),setTimeout(()=>{window.location.href="index.html"},2e3)):(r(a.error||"Erro ao redefinir senha","error"),s.disabled=!1,s.innerHTML='<i class="fas fa-check mr-2"></i>Redefinir Senha')}catch{r("Erro de conexão com o servidor","error"),s.disabled=!1,s.innerHTML='<i class="fas fa-check mr-2"></i>Redefinir Senha'}});[i,d].forEach(e=>{e.addEventListener("keypress",n=>{n.key==="Enter"&&s.click()})});window.togglePasswordVisibility=function(e,n){const o=document.getElementById(e),a=n.querySelector("i");o.type==="password"?(o.type="text",a.classList.remove("fa-eye"),a.classList.add("fa-eye-slash")):(o.type="password",a.classList.remove("fa-eye-slash"),a.classList.add("fa-eye"))};
